# 文本分句功能说明

## 功能概述

文本分句功能允许用户将输入的文本按照不同的方式进行分句，然后为每个分句生成独立的语音轨道，便于后续的语音编辑和处理。

## 主要特性

### 1. 三种分句方式

#### 标点符号分句
- 按照中文和英文标点符号进行分句
- 支持标点符号：`。！？；：，、.!?;:,`
- 适用于大多数文本内容

#### 段落分句
- 按照段落（双换行符）进行分句
- 适用于结构化的文本内容
- 保持段落的完整性

#### AI智能分句
- 基于语义和长度进行智能分句
- 结合标点符号和语义分析
- 自动优化分句长度，避免过短或过长

### 2. 分句参数设置

- **最小长度**：分句的最小字符数（默认10）
- **最大长度**：分句的最大字符数（默认150）
- **保留空白**：是否保留原始文本的空白字符

### 3. 分句编辑功能

- 查看所有分句内容
- 编辑单个分句的文本
- 为每个分句重新生成语音
- 添加新的分句
- 删除不需要的分句
- 播放单个分句的语音

## 使用方法

### 1. 基本使用流程

1. 在文本输入框中输入要转换的文本
2. 设置语音参数（语音、语速、音调）
3. 点击"分句生成"按钮
4. 选择分句方式和参数
5. 系统自动分句并为每个分句生成语音轨道

### 2. 分句编辑

1. 在轨道列表中找到已分句的轨道
2. 点击编辑按钮（铅笔图标）
3. 在分句编辑对话框中：
   - 修改分句文本
   - 重新生成语音
   - 添加或删除分句
4. 保存更改

### 3. 分句参数建议

#### 标点符号分句
- 最小长度：5-10字符
- 最大长度：100-200字符
- 适用于：对话、叙述性文本

#### 段落分句
- 最小长度：20-50字符
- 最大长度：200-500字符
- 适用于：文章、文档

#### AI智能分句
- 最小长度：10-20字符
- 最大长度：100-200字符
- 适用于：复杂文本、需要语义理解的内容

## 技术实现

### 1. 分句算法

```typescript
// 标点符号分句
TextSegmentation.segmentByPunctuation(text, options)

// 段落分句
TextSegmentation.segmentByParagraph(text, options)

// AI智能分句
TextSegmentation.segmentByAI(text, options)
```

### 2. 数据结构

```typescript
interface TextSegment {
  id: string
  text: string
  startIndex: number
  endIndex: number
  type: 'sentence' | 'paragraph' | 'ai'
}
```

### 3. 轨道管理

- 每个分句生成独立的音频轨道
- 轨道包含分句信息和语音数据
- 支持分句的增删改查操作

## 注意事项

1. **文本长度**：建议单次处理的文本不超过1000字符
2. **分句质量**：AI智能分句需要较长的文本才能发挥最佳效果
3. **语音生成**：每个分句都会调用TTS服务，请注意API调用次数
4. **性能考虑**：大量分句可能影响页面性能，建议分批处理

## 未来改进

1. 支持更多分句算法
2. 添加分句预览功能
3. 支持分句的拖拽排序
4. 添加分句合并功能
5. 支持自定义分句规则
